protect
	blendOps
	depthWrite
	depthFunc
	cull
	fill
	
sort scissor
	
local	tex		BG_terrain		default_white
local	tex		BG_scorched		default_white
local	tex		BG_night		default_black
local	tex		BG_burn			default_black
local	tex		BG_enviro		default_black
local	tex		BG_clouds		default_black
local	tex		BG_warp			default_grey
local	tex		BG_normal		default_normal

local	float4		BG_AtmoInfo		0.025	0.775	2.5		2.5
local	float2		BG_AtmoFade		1.0		1.0
local	float2		BG_ScatterInfo	0.5		0.5
local	float4		BG_LightScales	0.2		0.1		1.0		0.35
local	float3		BG_HaloKeySurf		0.8		0.45	0.23
local	float3		BG_HaloKeyCloud		0.85	0.65	0.43
local	float3		BG_HaloFillSurf		0.85	0.5		0.65
local	float3		BG_HaloFillCloud		0.92	0.75	0.83
local	float4		BG_MoveCloud1	-0.0083		0		0.025	0.025
local	float4		BG_MoveCloud2	-0.006		0		0.04	0.04
local	float4		BG_MoveCloud3	-0.0047		0		0.05	0.05
local	float3		BG_TintCloud1	1		1		1
local	float3		BG_TintCloud2	1		1		1
local	float3		BG_TintCloud3	1		1		1
local	float2		BG_MoveWarp		0.02		0
local	float4		BG_SurfDiff		0		0.75	0		0		// 0, Fren
local	float4		BG_SurfGlow		1.0		0.75	0.3		4.0		// Power, Fren, Key Offset, Scale
local	float4		BG_SurfSpec		1.0		1.0		0		0		// Power, Fren
local	float4		BG_SurfGloss		0.1		125		30		0		// Curve, Scale, Bias
local	float4		BG_SurfRefl		0.5		0.55	0.65	0		// Power, Fren, Add Mix
local	float4		BG_SurfFren		1.0		1.01	2.5				// Power, Bias, Curve
local	float4		BG_Trigger		0.0		0.0		0.0		0.0		// Same format as global 'timeTable'
local	float		BG_TimeScale	0.0
local	float4		BG_FinalGama	1.0		1.0		1.0		1.0
local	float3		BG_ReliefScale	1.0		1.0		1.0

layer
	program bg_planetmelt
	
	blendOps one zero
	depthWrite 1
	depthFunc less
	cull back
	fill poly
	
	alias	BG_terrain	inTexTerrain
	alias	BG_night	inTexNight
	alias	BG_scorched	inTexScorched
	alias	BG_burn		inTexBurn
	alias	BG_enviro	inTexEnviro
	alias	BG_clouds	inTexClouds
	alias	BG_warp		inTexWarp
	alias	BG_normal	inTexNormal
	
	alias	BG_AtmoInfo			inAtmoInfo
	alias	BG_AtmoFade			inAtmoFade
	alias	BG_ScatterInfo		inScatterInfo
	alias	BG_LightScales		inLightScales
	alias	BG_HaloKeySurf		inHaloKeySurf
	alias	BG_HaloKeyCloud		inHaloKeyCloud
	alias	BG_HaloFillSurf		inHaloFillSurf
	alias	BG_HaloFillCloud	inHaloFillCloud
	alias	BG_MoveCloud1		inMoveCloud1
	alias	BG_MoveCloud2		inMoveCloud2
	alias	BG_MoveCloud3		inMoveCloud3
	alias	BG_TintCloud1		inTintCloud1
	alias	BG_TintCloud2		inTintCloud2
	alias	BG_TintCloud3		inTintCloud3
	alias	BG_MoveWarp			inMoveWarp
	alias	BG_SurfDiff			inSurfDiff
	alias	BG_SurfGlow			inSurfGlow
	alias	BG_SurfSpec			inSurfSpec
	alias	BG_SurfGloss		inSurfGloss
	alias	BG_SurfRefl			inSurfRefl
	alias	BG_SurfFren			inSurfFren
	alias	BG_Trigger			inTrigger
	alias	BG_TimeScale		inTimeScale
	alias	BG_FinalGama		inFinalGama
	alias	BG_ReliefScale		inReliefScale

layer
	program bg_atmosmelt
	
	blendOps srcAlpha invSrcAlpha
	depthWrite 0
	depthFunc less
	cull front
	fill poly
	
	alias	BG_AtmoInfo			inAtmoInfo
	alias	BG_AtmoFade			inAtmoFade
	alias	BG_LightScales		inLightScales
	alias	BG_HaloKeySurf		inHaloKeySurf
	alias	BG_HaloKeyCloud		inHaloKeyCloud
	alias	BG_HaloFillSurf		inHaloFillSurf
	alias	BG_HaloFillCloud	inHaloFillCloud
	alias	BG_Trigger			inTrigger
	alias	BG_TimeScale		inTimeScale
	alias	BG_FinalGama		inFinalGama
